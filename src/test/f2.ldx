{
include('use-state.lua')
if SERVER then 
    AddCSLuaFile() 
end
}

Component OpenTestMenu = {
    <DFrame width={700} height={500}>
        {local counter = useState(0)}
        {local time = useState("Test")}
        <DButton 
            width={$PARENT:GetWide() * 0.5} 
            text={"Привет"}
            onClick={function() print("Привет!") end} 
            paint={function(self) print("fdfwe") end}
        />

        <DLabel size={$PARENT:GetWide() * 0.3, $PARENT:GetTall() * 0.5} text={"Простая текстовая метка"} />
        <DButton 
            onClick={function(a) 
                counter.setState(function(prev) 
                    return prev + 1
                end) 
            end}
        />
        <DFrame>INJECT(TestComponent)</DFrame>
        {local options = {11, 22, 33}}

        MAP(options) [
            <DLabel @time @counter id={$INDEX} text={$ITEM} />
        ]

        IF(true) [
            <DLabel @time @counter text={tostring(counter.value)} />
        ]
        
    </DFrame>
}

Component TestComponent = {
    <DFrame width={$PARENT:GetWide() * 0.5}>
        <DButton width={$PARENT:GetWide() * 0.5} text={"Другой компонент"}/>
    </DFrame>
}